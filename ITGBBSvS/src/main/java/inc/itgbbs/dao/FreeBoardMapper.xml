<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper   
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"   
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Board">
	<select id="selectList" parameterType="map" resultType="FreeBoardDTO">

		SELECT X.rnum, X.*
		FROM (
		SELECT rownum as rnum, A.*
		FROM (
		SELECT * FROM board
		where category=0
		ORDER BY anum desc) A
	<![CDATA[
			where rownum <= #{end}) X
		WHERE X.rnum >= #{start} 
	]]>
	</select>

	<select id="selectCount" parameterType="map" resultType="Integer">
		SELECT count(*) FROM board
		<where> category=0
		</where>
	</select>

	<!--최대값 구하기 데이터가 없으면 0을 반환 X NullPointerException반환 -->
	<select id="getNewSeq" resultType="int">
		select max(anum) from board
	</select>

	<!-- 글쓰기 -->
	<insert id="insertBoard" parameterType="FreeBoardDTO">
		insert into board(anum,writer,category,adate,ip,title,acontent)
		values(#{anum},#{writer},#{category},#{adate},#{ip},#{title},#{acontent})
	</insert>

</mapper>







